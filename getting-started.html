---
layout: page
title: 新手指南
---

  <p>本文將會教你如何開始使用 Swift 程式語言。</p>

<p>如果你從沒用過  Swift ，請參考<em>Swift 程式語言</em> 中的 <a href="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/Swift_Programming_Language/GuidedTour.html#//apple_ref/doc/uid/TP40014097-CH2-ID1">A Swift Tour（英文）</a> ，來快速了解 Swift 最重要的概念和功能。</p>

<h2 id="installing-swift">安裝 Swift </h2>

<p>第一步是下載並安裝 Swift 編譯器和其它必要的元件。請至<a href="/download">下載</a>頁面，參考你的作業系統平台的說明。</p>

<p>為了讓下面的範例能正常運作，請將 Swift 加進你的<code class="highlighter-rouge">$PATH</code></p>

<h3 id="on-os-x">在OS X上</h3>

<p>在OS X上，工具鏈的預設位置是<code class="highlighter-rouge">/Library/Developer/Toolchains</code> 。你可以使用以下指令讓 Swift 能在終端機中使用：
</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/Library/Developer/Toolchains/swift-latest.xctoolchain/usr/bin:<span class="s2">"</span><span class="k">${</span><span class="nv">PATH</span><span class="k">}</span><span class="s2">"</span>
</code></pre>
</div>

<h3 id="on-linux">在Linux上</h3>

<p>首先，安裝Clang：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>sudo apt-get install clang
</code></pre>
</div>

<p>如果 Swift 工具鏈不是安裝在Linux的系統根目錄時，
則需要執行下面的指令，將其中的 /path/to/Swift/ 改為你實際的 Swift 安裝路徑：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/path/to/Swift/usr/bin:<span class="s2">"</span><span class="k">${</span><span class="nv">PATH</span><span class="k">}</span><span class="s2">"</span>
</code></pre>
</div>

<hr>

<p>你可以透過 <code class="highlighter-rouge">swift</code> <code class="highlighter-rouge">--version</code> 來確認你執行的  Swift 版本</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>swift --version
Apple Swift version 2.2-dev <span class="o">(</span>LLVM ..., Clang ..., Swift ...<span class="o">)</span>
</code></pre>
</div>

<p>版本號上的<code class="highlighter-rouge">-dev</code>代表它<em>開發版</em> ，而不是正式發行版。</p>

<h2 id="using-the-repl">使用REPL</h2>

<p>如果你不帶參數地執行<code class="highlighter-rouge">swift</code> ，REPL就會啟動，它是一個互動式的shell，可以執行你輸入的 Swift 程式。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>swift
Welcome to Apple Swift version 2.2. Type :help <span class="k">for </span>assistance.
  1&gt;
</code></pre>
</div>

<p>使用 REPL 是體驗 Swift 的好方法。
舉例來說，如果你輸入 <code class="highlighter-rouge">1 + 2</code>,
就會在下一行顯示運算結果 <code class="highlighter-rouge">3</code> :</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>  1&gt; 1 + 2
<span class="nv">$R0</span>: Int <span class="o">=</span> 3
</code></pre>
</div>

<p>你可以定義常數和變數，然後使用它們。例如，可以定義<code class="highlighter-rouge">String</code> <code class="highlighter-rouge">Hello, world!</code>為常數<code class="highlighter-rouge">greeting</code> ，然後當作參數傳給<code class="highlighter-rouge">print(_:)</code> 函式：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>  2&gt; <span class="nb">let </span>greeting <span class="o">=</span> <span class="s2">"Hello!"</span>
greeting: String <span class="o">=</span> <span class="s2">"Hello!"</span>
  3&gt; print<span class="o">(</span>greeting<span class="o">)</span>
Hello!
</code></pre>
</div>

<p>如果輸入一個無效的運算式，REPL會標示出有錯誤的地方：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="nb">let </span>answer <span class="o">=</span> <span class="s2">"forty"</span>-<span class="s2">"two"</span>
error: binary operator <span class="s1">'-'</span> cannot be applied to two <span class="s1">'String'</span> operands
<span class="nb">let </span>answer <span class="o">=</span> <span class="s2">"forty"</span>-<span class="s2">"two"</span>
             ~~~~~~~^~~~~~
</code></pre>
</div>

<p>你可以使用上下方向鍵<code class="highlighter-rouge">↑</code>和<code class="highlighter-rouge">↓</code>來使用之前輸入過的程式碼。讓你可以對之前輸入的程式碼做小修改，用來修改像上一個例子中的錯誤時特別方便:</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="nb">let </span>answer <span class="o">=</span> <span class="s2">"forty-two"</span>
answer: String <span class="o">=</span> <span class="s2">"forty-two"</span>
</code></pre>
</div>

<p>REPL 的另一個好用的功能是自動完成。例如在一個<code class="highlighter-rouge">String</code>執後面輸入<code class="highlighter-rouge">.re</code>，然後按下tab<code class="highlighter-rouge">(⇥)</code>鍵，REPL會列出可能的選項，像是<code class="highlighter-rouge">removeAtIndex(_:)</code>和<code class="highlighter-rouge">replaceRange(_:with:)</code></p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">5&gt; </span><span class="s2">"Hi!"</span>.re⇥
Available completions:
	removeAll<span class="o">()</span> -&gt; Void
	removeAll<span class="o">(</span>keepCapacity: Bool<span class="o">)</span> -&gt; Void
	removeAtIndex<span class="o">(</span>i: Index<span class="o">)</span> -&gt; Character
	removeRange<span class="o">(</span>subRange: Range&lt;Index&gt;<span class="o">)</span> -&gt; Void
	replaceRange<span class="o">(</span>subRange: Range&lt;Index&gt;, with: C<span class="o">)</span> -&gt; Void
	replaceRange<span class="o">(</span>subRange: Range&lt;Index&gt;, with: String<span class="o">)</span> -&gt; Void
	reserveCapacity<span class="o">(</span>n: Int<span class="o">)</span> -&gt; Void
</code></pre>
</div>

<p>如果你開始了一個程式區塊, 比方說<code class="highlighter-rouge">for-in</code>，REPL會自動縮排下一行，並把提示字元從<code class="highlighter-rouge">&gt;</code>改成<code class="highlighter-rouge">.</code>來提示這段程式只有在整個程式區塊完成後才會被執行。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>  6&gt; <span class="nb">let </span>numbers <span class="o">=</span> <span class="o">[</span>1,2,3]
numbers: <span class="o">[</span>Int] <span class="o">=</span> 3 values <span class="o">{</span>
  <span class="o">[</span>0] <span class="o">=</span> 1
  <span class="o">[</span>1] <span class="o">=</span> 2
  <span class="o">[</span>2] <span class="o">=</span> 3
<span class="o">}</span>
  7&gt; <span class="k">for </span>n <span class="k">in </span>numbers.reverse<span class="o">()</span> <span class="o">{</span>
  8.     print<span class="o">(</span>n<span class="o">)</span>
  9. <span class="o">}</span>
3
2
1
</code></pre>
</div>

<p>REPL 包含完整的 Swift 功能，從控制流程到定義 Struct 和 Class。</p>

<p>你還可以import任何可用的系統 module，如OS X上的<code class="highlighter-rouge">Darwin</code>和Linux上的<code class="highlighter-rouge">Glibc</code> ：</p>

<h3 id="on-os-x-1">OS X上</h3>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="mi">1</span><span class="o">&gt;</span> <span class="kd">import</span> <span class="kt">Darwin</span>
<span class="mi">2</span><span class="o">&gt;</span> <span class="nf">arc4random_uniform</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="err">$</span><span class="kt">R0</span><span class="p">:</span> <span class="kt">UInt32</span> <span class="o">=</span> <span class="mi">4</span>
</code></pre>
</div>

<h3 id="on-linux-1">Linux上</h3>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="mi">1</span><span class="o">&gt;</span> <span class="kd">import</span> <span class="kt">Glibc</span>
<span class="mi">2</span><span class="o">&gt;</span> <span class="nf">random</span><span class="p">()</span> <span class="o">%</span> <span class="mi">10</span>
<span class="err">$</span><span class="kt">R0</span><span class="p">:</span> <span class="kt">Int32</span> <span class="o">=</span> <span class="mi">4</span>
</code></pre>
</div>

<h2 id="using-the-build-system">使用Build System</h2>

<p>Swift 的 build system 讓大家可以 build 函式庫和執行檔，還有在各 Project 間共用程式碼．</p>

<p>這些範例需要你將<code class="highlighter-rouge">swift</code>加到你的 path 中;方法請看<a href="#installing-swift">安裝</a>。設定好後，你就可以使用<code class="highlighter-rouge">swift build</code> 來執行 build system：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>swift build --help
OVERVIEW: Build sources into binary products
...
</code></pre>
</div>

<h3 id="creating-a-package">建立一個 Package</h3>

<p>要建立一個新 Swift  Package，首先要建立一個<code class="highlighter-rouge">Hello</code> 資料夾並進入它：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>mkdir Hello
<span class="gp">$ </span><span class="nb">cd </span>Hello
</code></pre>
</div>

<p>每個 Package 都必須在它的根目錄有一個名為<code class="highlighter-rouge">Package.swift</code>的資訊清單檔。如果資訊清單檔是空白的，Package Manager會使用慣例的預設值來build Package。建立空的Package.swift ：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>touch Package.swift
</code></pre>
</div>

<p>當使用預設值時，Package Manager 預期所有程式碼都在<code class="highlighter-rouge">Sources/</code>目錄中。建立 Sources 資料夾：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>mkdir Sources
</code></pre>
</div>

<h3 id="building-an-executable">Build 一個執行檔</h3>

<p>預設情況下，會將程式碼資料夾內的<code class="highlighter-rouge">main.swift</code>編譯成執行檔，檔名就是 Package 名稱。</p>

<p>在這個例子中，編譯來出的<code class="highlighter-rouge">Hello</code>執行檔會輸出"Hello, world!" 。</p>

<p>在<code class="highlighter-rouge">Sources/</code>目錄下建立一個名為<code class="highlighter-rouge">main.swift</code>的檔案，並使用你喜歡的編輯器輸入以下程式碼：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="nf">print</span><span class="p">(</span><span class="s">"Hello, world!"</span><span class="p">)</span>
</code></pre>
</div>

<p>使用<code class="highlighter-rouge">swift build</code>指令來編譯 Package：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>swift build
</code></pre>
</div>

<p>指令完成後，編譯的成品會放在<code class="highlighter-rouge">.build</code>目錄。使用下面的指令來執行<code class="highlighter-rouge">Hello</code>程式：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>.build/debug/Hello
Hello, world!
</code></pre>
</div>

<p>再來，讓我們在另一個檔案定義一個<code class="highlighter-rouge">sayHello(_:)</code>函式，再讓執行檔呼叫他，而不是直接呼叫<code class="highlighter-rouge">print(_:)</code>。</p>

<h3 id="working-with-multiple-source-files">使用多個程式檔</h3>

<p>在<code class="highlighter-rouge">Sources/</code>目錄下建立一個新的<code class="highlighter-rouge">Greeter.swift</code>檔案並輸入以下程式碼：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="kd">func</span> <span class="nf">sayHello</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Hello, </span><span class="se">\(</span><span class="n">name</span><span class="se">)</span><span class="s">!"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">sayHello(_:)</code>函式只有一個<code class="highlighter-rouge">String</code>參數，會輸出 Hello 加上傳入的參數。</p>

<p>現在打開<code class="highlighter-rouge">main.swift</code>，並把之前的內容更換成下面程式碼：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="k">if</span> <span class="kt">Process</span><span class="o">.</span><span class="n">arguments</span><span class="o">.</span><span class="n">count</span> <span class="o">!=</span> <span class="mi">2</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Usage: hello NAME"</span><span class="p">)</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">name</span> <span class="o">=</span> <span class="kt">Process</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="nf">sayHello</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">main.swift</code>現在會讀取command line參數而不是像以前那樣使用寫死的名字。而且<code class="highlighter-rouge">main.swift</code>現在不會直接呼叫<code class="highlighter-rouge">print(_:)</code>而是呼叫<code class="highlighter-rouge">sayHello(_:)</code>函式。因為這個函式是<code class="highlighter-rouge">Hello</code> module 的一部分，我們不需要<code class="highlighter-rouge">import</code>它。</p>

<p>執行<code class="highlighter-rouge">swift build</code>與試試新的<code class="highlighter-rouge">Hello</code>程式</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>swift build
<span class="gp">$ </span>.build/debug/Hello <span class="sb">`</span>whoami<span class="sb">`</span>
</code></pre>
</div>

<hr>

<blockquote>
  <p>要了解更多有關 Swift Package Manager，包括如何build module，import dependencies，以及使用系統函式庫，請參考<a href="/package-manager">Swift Package Manager</a>。</p>
</blockquote>

<h2 id="using-the-lldb-debugger">使用LLDB Debugger</h2>

<p>你可以使用LLDB debugger 來一步一步地執行 Swift 程式，設置中斷點，檢查和修改程式狀態。</p>

<p>下面的 Swift 例子會定義一個<code class="highlighter-rouge">factorial(_:)</code>函式，並輸出呼叫該函式的結果：</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="kd">func</span> <span class="nf">factorial</span><span class="p">(</span><span class="nv">n</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="p">{</span> <span class="k">return</span> <span class="n">n</span> <span class="p">}</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">number</span> <span class="o">=</span> <span class="mi">4</span>
<span class="nf">print</span><span class="p">(</span><span class="s">"</span><span class="se">\(</span><span class="n">number</span><span class="se">)</span><span class="s">! is equal to </span><span class="se">\(</span><span class="nf">factorial</span><span class="p">(</span><span class="n">number</span><span class="p">)</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
</code></pre>
</div>

<p>將上面的程式碼存成一個名為 <code class="highlighter-rouge">Factorial.swift</code> 檔案，並執行<code class="highlighter-rouge">swiftc</code>，將檔案名當​​作參數，同時使用<code class="highlighter-rouge">-g</code>選項產生除錯資訊。這樣會在現在的目錄下產生一個<code class="highlighter-rouge">Factorial</code>執行檔。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>swiftc -g Factorial.swift
<span class="gp">$ </span>ls
Factorial.dSYM
Factorial.swift
Factorial<span class="k">*</span>
</code></pre>
</div>

<p>不要直接執行<code class="highlighter-rouge">Factorial</code>，改為把它當成參數來透過<code class="highlighter-rouge">lldb</code>執行它。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>$ lldb Factorial
(lldb) target create "Factorial"
Current executable set to 'Factorial' (x86_64).
</code></pre>
</div>

<p>這會啟動一個互動式 console，可以執行LLDB指令。</p>

<blockquote>
  <p>有關LLDB指令的詳細資訊，請參閱<a href="http://lldb.llvm.org/tutorial.html">LLDB教學(英文)</a> 。</p>
</blockquote>

<p>使用<code class="highlighter-rouge">breakpoint set</code> <code class="highlighter-rouge">(b)</code>指令來在<code class="highlighter-rouge">factorial(_:)</code>函數第二行設定中斷點，這樣每次執行這個函式的時候就會暫停。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>(lldb) b 2
Breakpoint 1: where = Factorial`Factorial.factorial (Swift.Int) -&gt; Swift.Int + 12 at Factorial.swift:2, address = 0x0000000100000e7c
</code></pre>
</div>

<p>使用<code class="highlighter-rouge">run</code> <code class="highlighter-rouge">(r)</code>來執行程式。程式會在<code class="highlighter-rouge">factorial(_:)</code>函式處暫停。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>(lldb) r
Process 40246 resuming
Process 40246 stopped
* thread #1: tid = 0x14dfdf, 0x0000000100000e7c Factorial`Factorial.factorial (n=4) -&gt; Swift.Int + 12 at Factorial.swift:2, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1
    frame #0: 0x0000000100000e7c Factorial`Factorial.factorial (n=4) -&gt; Swift.Int + 12 at Factorial.swift:2
   1    func factorial(n: Int) -&gt; Int {
-&gt; 2        if n &lt;= 1 { return n }
   3        return n * factorial(n - 1)
   4    }
   5
   6    let number = 4
   7    print("\(number)! is equal to \(factorial(number))")
</code></pre>
</div>

<p>使用<code class="highlighter-rouge">print</code> <code class="highlighter-rouge">(p)</code>來檢查參數<code class="highlighter-rouge">n</code>的值。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>(lldb) p n
(Int) $R0 = 4
</code></pre>
</div>

<p><code class="highlighter-rouge">print</code>也可以用來直接執行 Swift 程式碼。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>(lldb) p n * n
(Int) $R1 = 16
</code></pre>
</div>

<p><code class="highlighter-rouge">backtrace</code> <code class="highlighter-rouge">(bt)</code>可以顯示<code class="highlighter-rouge">factorial(_:)</code>被呼叫的 frame。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>(lldb) bt
* thread #1: tid = 0x14e393, 0x0000000100000e7c Factorial`Factorial.factorial (n=4) -&gt; Swift.Int + 12 at Factorial.swift:2, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1
  * frame #0: 0x0000000100000e7c Factorial`Factorial.factorial (n=4) -&gt; Swift.Int + 12 at Factorial.swift:2
    frame #1: 0x0000000100000daf Factorial`main + 287 at Factorial.swift:7
    frame #2: 0x00007fff890be5ad libdyld.dylib`start + 1
    frame #3: 0x00007fff890be5ad libdyld.dylib`start + 1
</code></pre>
</div>

<p>使用<code class="highlighter-rouge">continue</code> <code class="highlighter-rouge">(c)</code>來繼續執行直到下一個中斷點。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>(lldb) c
Process 40246 resuming
Process 40246 stopped
* thread #1: tid = 0x14e393, 0x0000000100000e7c Factorial`Factorial.factorial (n=3) -&gt; Swift.Int + 12 at Factorial.swift:2, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1
    frame #0: 0x0000000100000e7c Factorial`Factorial.factorial (n=3) -&gt; Swift.Int + 12 at Factorial.swift:2
   1    func factorial(n: Int) -&gt; Int {
-&gt; 2        if n &lt;= 1 { return n }
   3        return n * factorial(n - 1)
   4    }
   5
   6    let number = 4
   7    print("\(number)! is equal to \(factorial(number))")
</code></pre>
</div>

<p>再使用一次<code class="highlighter-rouge">print</code> <code class="highlighter-rouge">(p)</code>來檢查第二次呼叫<code class="highlighter-rouge">factorial(_:)</code>時參數<code class="highlighter-rouge">n</code>的值。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>(lldb) p n
(Int) $R2 = 3
</code></pre>
</div>

<p><code class="highlighter-rouge">breakpoint disable</code> <code class="highlighter-rouge">(br di)</code>可以關閉所有中斷點，再用<code class="highlighter-rouge">continue</code> <code class="highlighter-rouge">(c)</code>讓程式執行到結束。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>(lldb) br di
All breakpoints disabled. (1 breakpoints)
(lldb) c
Process 40246 resuming
4! is equal to 24
Process 40246 exited with status = 0 (0x00000000)
</code></pre>
</div>

<hr>

<p>現在你應該稍微了解 Swift REPL，build system 和 debugger了，再來你可以參考下面的頁面：</p>

<ul>
  <li><a href="/package-manager">Package Manager</a>更詳細的介紹了 Swift build system 和 package manager。</li>
  <li>閱讀<a href="/contributing">參與開發</a> 來了解參加Swift 開發社群的各種方法。</li>
  <li><a href="https://developer.apple.com/swift/resources/">developer.apple.com/swift</a>
有各種 Swift 相關的影片，範例程式和 playground。</li>
</ul>
